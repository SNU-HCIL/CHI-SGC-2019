<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <style>
            body {
                background-color: white;
            }
        </style>
    </head>
    <body>
        <div id="board"></div>
        <div id="notice"></div>
        <script src="game.js"></script>
        <script>
            let boardDiv = document.getElementById("board");
            let noticeDiv = document.getElementById("notice");
            let initialState = [
                [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1],
                [-1,  5,  1,  1,  1, -1,  1,  1,  1,  1,  1,  1,  1,  1, -1,  1,  1,  1, -3, -1],
                [-1,  1, -1, -1,  1, -1,  1, -1, -1, -1, -1, -1, -1,  1, -1,  1, -1, -1,  1, -1],
                [-1,  1, -1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1, -1,  1, -1],
                [-1,  1, -1,  1, -1, -1,  1, -1, -1,  0,  0, -1, -1,  1, -1, -1,  1, -1,  1, -1],
                [-1,  1,  1,  1,  1,  1,  1, -1, -3,  0,  0,  0, -1,  1,  1,  1,  1,  1,  1, -1],
                [-1,  1, -1,  1, -1, -1,  1, -1, -1, -1, -1, -1, -1,  1, -1, -1,  1, -1,  1, -1],
                [-1,  1, -1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1, -2,  1,  1,  1, -1,  1, -1],
                [-1,  1, -1, -1,  1, -1,  1, -1, -1, -1, -1, -1, -1,  1, -1,  1, -1, -1,  1, -1],
                [-1, -3,  1,  1,  1, -1,  1,  1,  1,  1,  1,  1,  1,  1, -1,  1,  1,  1,  5, -1],
                [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1]
            ];
            let game = new Game(initialState, boardDiv, noticeDiv);
            let totalReward = 0;
            let result;
            document.addEventListener('keydown', (event) => {
                if (event.keyCode === 37) {
                    result = game.step("left");
                }
                else if (event.keyCode === 38) {
                    result = game.step("down");
                }
                else if (event.keyCode === 39) {
                    result = game.step("right");
                }
                else if (event.keyCode === 40) {
                    result = game.step("up");
                }
                if (result != null) {
                    while (noticeDiv.hasChildNodes()) {
                        noticeDiv.removeChild(noticeDiv.firstChild);
                    }
                    //console.log(result);
                    totalReward += result.reward;
                    noticeDiv.insertAdjacentHTML('beforeend', `
                        <h2>Reward: ` + totalReward + `, Done: ` + result.done + `</h2>`);
                }
            }, true);
        </script>
    </body>
</html>